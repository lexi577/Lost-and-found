import{r as h}from"./request-6080a32f.js";import{u as V}from"./index-30a7062a.js";import{bc as a}from"./index-756fa734.js";import{V as w,r as b,a7 as n,y,z as x,P as o,I as t,A as i,M as v}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const C={style:{width:"40%","margin-top":"30px"}},U=i("span",{style:{"font-size":"22px","text-align":"center","line-height":"80px"}},[i("h3",null,"Confirm Reset information")],-1),k={style:{"text-align":"center",width:"100%"}},E={__name:"Password",setup(q){const u=V(),p=u.getUser,e=w({form:{}});e.form.uid=p.uid;const f=()=>{if(e.form.newPassword!==e.form.confirmPassword){a.warning("The new passwords you entered twice do not match");return}if(e.form.newPassword===e.form.password){a.warning("The new and old passwords cannot be the same");return}h.post("/password/change",e.form).then(l=>{l.code==="200"?(a.success("Password reset successful"),u.logout()):a.error(l.msg)})},c=w({password:[{required:!0,message:"Please enter the original password",trigger:"blur"}],newPassword:[{required:!0,message:"Please enter new password",trigger:"blur"}],confirmPassword:[{required:!0,message:"Please confirm your new password",trigger:"blur"}]}),_=b();return(l,r)=>{const d=n("el-input"),m=n("el-form-item"),g=n("el-form"),P=n("el-button");return y(),x("div",C,[U,o(g,{style:{width:"80%",margin:"0 auto"},"label-width":"110px",model:e.form,rules:c,ref_key:"ruleFormRef",ref:_},{default:t(()=>[o(m,{label:"Please enter the original password",prop:"password"},{default:t(()=>[o(d,{"show-password":"",modelValue:e.form.password,"onUpdate:modelValue":r[0]||(r[0]=s=>e.form.password=s)},null,8,["modelValue"])]),_:1}),o(m,{label:"Please enter new password",prop:"newPassword"},{default:t(()=>[o(d,{"show-password":"",modelValue:e.form.newPassword,"onUpdate:modelValue":r[1]||(r[1]=s=>e.form.newPassword=s)},null,8,["modelValue"])]),_:1}),o(m,{label:"Please confirm your new password",prop:"confirmPassword"},{default:t(()=>[o(d,{"show-password":"",modelValue:e.form.confirmPassword,"onUpdate:modelValue":r[2]||(r[2]=s=>e.form.confirmPassword=s)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"]),i("div",k,[o(P,{type:"primary",onClick:f},{default:t(()=>[v("Confirm Reset")]),_:1})])])}}};export{E as default};
