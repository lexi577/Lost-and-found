import{c as O,r as C}from"./request-6080a32f.js";import{u as he}from"./index-30a7062a.js";import{T as be,E as we}from"./index.esm-2d42c9cb.js";import{bc as v}from"./index-756fa734.js";import{r as f,V as H,v as ke,j as Ce,a7 as s,y as c,z as P,A as r,P as e,I as t,M as d,u,H as h,L as y,O as Y,F as Ve,a0 as xe,S as q}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const Ue=r("span",{style:{"vertical-align":"middle"}}," Query ",-1),Se=r("span",{style:{"vertical-align":"middle"}}," Clear ",-1),Ie={style:{margin:"10px 0"}},Oe=r("span",{style:{"vertical-align":"middle"}}," Add to ",-1),Pe=r("span",{style:{"vertical-align":"middle"}}," Import ",-1),Ne=r("span",{style:{"vertical-align":"middle"}}," Export ",-1),ze=r("span",{style:{"vertical-align":"middle"}}," Batch Deletion ",-1),Be={style:{margin:"10px 0"}},De={key:0},Re={key:0},Ee={class:"page"},Le={style:{border:"1px solid #ccc"}},Te={class:"dialog-footer"},$e=["innerHTML"],Ae={class:"dialog-footer"},Qe={__name:"Recruit",setup(Fe){const x=f(""),N=f(1),z=f(5),L=f(0),B=he(),D=B.getBearerToken,b=B.getAuths;B.getUser;const n=H({tableData:[],form:{}}),V=f(""),R=ke(),J={placeholder:"Please enter content...",MENU_CONF:{uploadImage:{fieldName:"file",server:`http://${O.serverUrl}/file/uploadImg`,headers:{Authorization:D}}}},T=f(""),U=f(!1),j=a=>{U.value=!0,T.value=a},Q=a=>{R.value=a};Ce(()=>{const a=R.value;a!=null&&a.destroy()}),n.categoryOptions=[],C.get("/category").then(a=>n.categoryOptions=a.data),n.userOptions=[],C.get("/user").then(a=>n.userOptions=a.data);const S=f([]),G=a=>{S.value=a},K=()=>{if(!S.value||!S.value.length){v.warning("Please select data");return}const a=S.value.map(o=>o.id);C.post("/recruit/del/batch",a).then(o=>{o.code==="200"?(v.success("Operation successful"),_()):v.error(o.msg)})},_=()=>{C.get("/recruit/page",{params:{name:x.value,pageNum:N.value,pageSize:z.value}}).then(a=>{n.tableData=a.data.records,L.value=a.data.total})};_();const W=()=>{x.value="",_()},w=f(!1),X=H({name:[{required:!0,message:"Please enter a name",trigger:"blur"}]}),I=f(),Z=()=>{w.value=!0,q(()=>{I.value.resetFields(),n.form={},V.value=""})},ee=()=>{I.value.validate(a=>{a&&(n.form.content=V.value,C.request({url:"/recruit",method:n.form.id?"put":"post",data:n.form}).then(o=>{o.code==="200"?(v.success("save successfully"),w.value=!1,_()):v.error(o.msg)}))})},te=a=>{w.value=!0,q(()=>{I.value.resetFields(),n.form=JSON.parse(JSON.stringify(a)),V.value=a.content})},le=a=>{C.delete("/recruit/"+a).then(o=>{o.code==="200"?(v.success("Operation successful"),_()):v.error(o.msg)})},oe=()=>{window.open(`http://${O.serverUrl}/recruit/export`)},ae=()=>{_(),v.success("Import Success")},ne=a=>{n.form.img=a.data,v.success("Upload Successfully")};return(a,o)=>{const E=s("el-input"),se=s("Search"),g=s("el-icon"),i=s("el-button"),re=s("RefreshLeft"),ie=s("Plus"),de=s("Bottom"),$=s("el-upload"),ue=s("Top"),A=s("Remove"),F=s("el-popconfirm"),m=s("el-table-column"),ce=s("el-image"),me=s("Edit"),pe=s("el-table"),fe=s("el-pagination"),_e=s("el-option"),ve=s("el-select"),k=s("el-form-item"),ge=s("el-date-picker"),ye=s("el-form"),M=s("el-dialog");return c(),P("div",null,[r("div",null,[e(E,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=l=>x.value=l),placeholder:"Please enter a name",class:"w300"},null,8,["modelValue"]),e(i,{type:"primary",class:"ml5",onClick:_},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(se)]),_:1}),d(),Ue]),_:1}),e(i,{type:"warning",class:"ml5",onClick:W},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(re)]),_:1}),d(),Se]),_:1})]),r("div",Ie,[u(b).includes("recruit.add")?(c(),h(i,{key:0,type:"success",onClick:Z},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ie)]),_:1}),d(),Oe]),_:1})):y("",!0),u(b).includes("recruit.import")?(c(),h($,{key:1,class:"ml5","show-file-list":!1,style:{display:"inline-block",position:"relative",top:"3px"},action:`http://${u(O).serverUrl}/recruit/import`,"on-success":ae,headers:{Authorization:u(D)}},{default:t(()=>[e(i,{type:"primary"},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(de)]),_:1}),d(),Pe]),_:1})]),_:1},8,["action","headers"])):y("",!0),u(b).includes("recruit.export")?(c(),h(i,{key:2,type:"primary",onClick:oe,class:"ml5"},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ue)]),_:1}),d(),Ne]),_:1})):y("",!0),u(b).includes("recruit.deleteBatch")?(c(),h(F,{key:3,title:"are you sure you want to delete?",onConfirm:K},{reference:t(()=>[e(i,{type:"danger",style:{"margin-left":"5px"}},{default:t(()=>[e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(A)]),_:1}),d(),ze]),_:1})]),_:1})):y("",!0)]),r("div",Be,[e(pe,{data:n.tableData,stripe:"",border:"",onSelectionChange:G,"header-cell-class-name":"headerBg"},{default:t(()=>[e(m,{type:"selection",width:"55"}),e(m,{prop:"id",label:"number"}),e(m,{label:"Item Classification"},{default:t(l=>[l.row.category_id?(c(),P("span",De,Y(n.categoryOptions.find(p=>p.id===l.row.category_id)?n.categoryOptions.find(p=>p.id===l.row.category_id).name:""),1)):y("",!0)]),_:1}),e(m,{prop:"name",label:"Item Name"}),e(m,{label:"Item Image"},{default:t(l=>[e(ce,{"preview-teleported":"",style:{width:"80px",height:"80px"},src:l.row.img,"preview-src-list":[l.row.img]},null,8,["src","preview-src-list"])]),_:1}),e(m,{label:"Item Description"},{default:t(l=>[e(i,{onClick:p=>j(l.row.content)},{default:t(()=>[d("Check")]),_:2},1032,["onClick"])]),_:1}),e(m,{prop:"address",label:"Pickup Location"}),e(m,{prop:"time",label:"Pickup time"}),e(m,{label:"Publisher"},{default:t(l=>[l.row.user_id?(c(),P("span",Re,Y(n.userOptions.find(p=>p.id===l.row.user_id)?n.userOptions.find(p=>p.id===l.row.user_id).name:""),1)):y("",!0)]),_:1}),e(m,{label:"operate",width:"220"},{default:t(l=>[u(b).includes("recruit.edit")?(c(),h(i,{key:0,type:"primary",onClick:p=>te(l.row)},{default:t(()=>[d("Revise"),e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(me)]),_:1})]),_:2},1032,["onClick"])):y("",!0),u(b).includes("recruit.delete")?(c(),h(F,{key:1,title:"are you sure you want to delete?",onConfirm:p=>le(l.row.id)},{reference:t(()=>[e(i,{type:"danger"},{default:t(()=>[d("delete"),e(g,{style:{"vertical-align":"middle"}},{default:t(()=>[e(A)]),_:1})]),_:1})]),_:2},1032,["onConfirm"])):y("",!0)]),_:1})]),_:1},8,["data"])]),r("div",Ee,[e(fe,{"prev-text":"previous","next-text":"next",onCurrentChange:_,onSizeChange:_,"current-page":N.value,"onUpdate:current-page":o[1]||(o[1]=l=>N.value=l),"page-size":z.value,"onUpdate:page-size":o[2]||(o[2]=l=>z.value=l),background:"","page-sizes":[4,8,12,16],layout:"prev, pager, next, total",total:L.value},null,8,["current-page","page-size","total"])]),e(M,{modelValue:w.value,"onUpdate:modelValue":o[9]||(o[9]=l=>w.value=l),title:"Lost and found information",width:"40%"},{footer:t(()=>[r("span",Te,[e(i,{onClick:o[8]||(o[8]=l=>w.value=!1)},{default:t(()=>[d("Cancel")]),_:1}),e(i,{type:"primary",onClick:ee},{default:t(()=>[d(" save ")]),_:1})])]),default:t(()=>[e(ye,{ref_key:"ruleFormRef",ref:I,rules:X,model:n.form,"label-width":"125px",style:{padding:"0 20px"},"status-icon":""},{default:t(()=>[e(k,{prop:"categoryId",label:"Item Classification"},{default:t(()=>[e(ve,{clearable:"",modelValue:n.form.category_id,"onUpdate:modelValue":o[3]||(o[3]=l=>n.form.category_id=l),placeholder:"Please select",style:{width:"100%"}},{default:t(()=>[(c(!0),P(Ve,null,xe(n.categoryOptions,l=>(c(),h(_e,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(k,{prop:"name",label:"Item Name"},{default:t(()=>[e(E,{modelValue:n.form.name,"onUpdate:modelValue":o[4]||(o[4]=l=>n.form.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(k,{prop:"img",label:"Item Image"},{default:t(()=>[e($,{"show-file-list":!1,action:`http://${u(O).serverUrl}/file/upload`,ref:"file",headers:{Authorization:u(D)},"on-success":ne},{default:t(()=>[e(i,{size:"small",type:"primary"},{default:t(()=>[d("Click Upload")]),_:1})]),_:1},8,["action","headers"])]),_:1}),e(k,{prop:"content",label:"Item Description"},{default:t(()=>[r("div",Le,[e(u(be),{style:{"border-bottom":"1px solid #ccc"},editor:u(R),mode:"simple"},null,8,["editor"]),e(u(we),{style:{height:"300px","overflow-y":"hidden"},modelValue:V.value,"onUpdate:modelValue":o[5]||(o[5]=l=>V.value=l),defaultConfig:J,mode:"simple",onOnCreated:Q},null,8,["modelValue"])])]),_:1}),e(k,{prop:"address",label:"Pickup Location"},{default:t(()=>[e(E,{modelValue:n.form.address,"onUpdate:modelValue":o[6]||(o[6]=l=>n.form.address=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(k,{prop:"time",label:"Pickup time"},{default:t(()=>[e(ge,{style:{width:"100%"},modelValue:n.form.time,"onUpdate:modelValue":o[7]||(o[7]=l=>n.form.time=l),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"Select date and time"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),e(M,{modelValue:U.value,"onUpdate:modelValue":o[11]||(o[11]=l=>U.value=l),title:"Preview",width:"40%"},{footer:t(()=>[r("span",Ae,[e(i,{onClick:o[10]||(o[10]=l=>U.value=!1)},{default:t(()=>[d("closure")]),_:1})])]),default:t(()=>[r("div",{id:"editor-content-view",class:"editor-content-view",innerHTML:T.value,style:{padding:"0 20px"}},null,8,$e)]),_:1},8,["modelValue"])])}}};export{Qe as default};
