import{u as F,r as M}from"./index-30a7062a.js";import{r as u}from"./request-6080a32f.js";import"./index.esm-2d42c9cb.js";import{bc as f}from"./index-756fa734.js";import{r as p,V as N,a7 as d,y as c,z as _,A as r,P as l,I as s,F as S,a0 as U,H as B,M as g,O as y,L as b}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const I={style:{width:"100%"}},$=["href"],A=["src"],H={style:{width:"85%",margin:"0 auto","margin-bottom":"50px"}},R=r("div",{style:{"padding-bottom":"15px","margin-top":"20px","text-align":"left"}},[r("span",{style:{"font-size":"14px","margin-right":"20px"}},"Current location: Home> My lost and found record")],-1),T=r("div",{style:{"padding-bottom":"15px","border-bottom":"3px solid #FF9900","text-align":"left",display:"flex"}},[r("span",{style:{"font-weight":"bold","font-size":"24px",float:"left",flex:"3",color:"#FF9900"}},"My lost and found record")],-1),P={key:0},j=["onClick"],E=["onClick"],q=["innerHTML"],G={class:"dialog-footer"},te={__name:"Orders",setup(J){const v=F().getUser;p(1),p(5),p(0),v.id==null&&M.push("/login");const w=p(""),m=p(!1),k=a=>{m.value=!0,w.value=a},o=N({tableData:[],form:{}}),h=()=>{u.get("/front/orders/list").then(a=>{o.tableData=a.data,o.tableData=o.tableData.filter(t=>t.userId===v.id)})};h(),u.get("/front/banner/list").then(a=>{o.rotationList=a.data,o.rotationList=o.rotationList.filter(t=>t.indexRadio==="NO")});const C=a=>{u.delete("/front/orders/"+a).then(t=>{t.code==="200"?(f.success("Operation successful"),h()):f.error(t.msg)})},O=a=>{u.put("/front/orders/cancel/"+a).then(t=>{t.code==="200"?(f.success("Operation successful"),h()):f.error(t.msg)})};return o.userOptions=[],u.get("/front/user/list").then(a=>o.userOptions=a.data),(a,t)=>{const L=d("el-carousel-item"),V=d("el-carousel"),n=d("el-table-column"),x=d("el-button"),z=d("el-table"),D=d("el-dialog");return c(),_("div",null,[r("div",null,[r("div",I,[l(V,{interval:5e3,arrow:"always",height:"200px"},{default:s(()=>[(c(!0),_(S,null,U(o.rotationList,e=>(c(),B(L,{key:e},{default:s(()=>[r("a",{href:e.url,target:"_blank"},[r("img",{src:e.img,alt:"",style:{width:"100%",height:"100%"}},null,8,A)],8,$)]),_:2},1024))),128))]),_:1})])]),r("div",H,[R,T,l(z,{data:o.tableData,style:{width:"100%","margin-top":"20px"},stripe:"",border:"","header-cell-class-name":"headerBg"},{default:s(()=>[l(n,{prop:"id",label:"Serial number"},{default:s(e=>[g(y(e.$index+1),1)]),_:1}),l(n,{prop:"name",label:"Claim Number"}),l(n,{label:"Pickers",width:"250px;"},{default:s(e=>[e.row.bizUserId?(c(),_("span",P,y(o.userOptions.find(i=>i.id===e.row.bizUserId)?o.userOptions.find(i=>i.id===e.row.bizUserId).name:""),1)):b("",!0)]),_:1}),l(n,{label:"Claim details"},{default:s(e=>[l(x,{onClick:i=>k(e.row.content)},{default:s(()=>[g("Check")]),_:2},1032,["onClick"])]),_:1}),l(n,{prop:"createTime",label:"Application period"}),l(n,{prop:"stateRadio",label:"Claim status"}),l(n,{label:"operate",width:"150px;"},{default:s(e=>[e.row.stateRadio=="Applying"?(c(),_("a",{key:0,href:"javascript:void(0)",onClick:i=>C(e.row.id),class:"delete-link",style:{"margin-right":"15px"}},"delete",8,j)):b("",!0),e.row.stateRadio=="Applying"?(c(),_("a",{key:1,href:"javascript:void(0)",onClick:i=>O(e.row.id),class:"delete-link"},"Cancel",8,E)):b("",!0)]),_:1})]),_:1},8,["data"])]),l(D,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=e=>m.value=e),title:"Preview",width:"40%"},{footer:s(()=>[r("span",G,[l(x,{onClick:t[0]||(t[0]=e=>m.value=!1)},{default:s(()=>[g("closure")]),_:1})])]),default:s(()=>[r("div",{id:"editor-content-view",class:"editor-content-view",innerHTML:w.value,style:{padding:"0 20px"}},null,8,q)]),_:1},8,["modelValue"])])}}};export{te as default};
