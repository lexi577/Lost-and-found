import{r as _,c as A}from"./request-6080a32f.js";import{u as B}from"./index-30a7062a.js";import{bc as i}from"./index-756fa734.js";import{V as P,a7 as a,y as m,z as p,P as o,I as s,A as n,u as f,H as C,M as S}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const z={style:{width:"40%","margin-top":"30px"}},E=n("span",{style:{"font-size":"22px","text-align":"center","line-height":"80px"}},[n("h3",null,"Modify personal information")],-1),M={style:{"text-align":"center"}},N=["src"],R={style:{"text-align":"center",width:"100%"}},F={__name:"Person",emits:["getAvatar"],setup(I,{emit:h}){const r=B(),v=r.getUser,g=r.getBearerToken,e=P({form:{}});(()=>{_.get("/user/"+v.id).then(t=>{e.form=t.data})})();const x=t=>{e.form.avatar=t.data,i.success("Uploaded avatar successfully")},y=()=>{_.put("/updateUser",e.form).then(t=>{t.code==="200"?(i.success("Update Success"),r.setUser(t.data),h("getAvatar",t.data.avatar)):i.error(t.msg)})};return(t,l)=>{const V=a("Plus"),b=a("el-icon"),U=a("el-upload"),d=a("el-input"),u=a("el-form-item"),k=a("el-form"),w=a("el-button");return m(),p("div",z,[E,o(k,{style:{width:"80%",margin:"0 auto"},"label-width":"60px"},{default:s(()=>[n("div",M,[o(U,{class:"avatar-uploader","show-file-list":!1,action:`http://${f(A).serverUrl}/file/upload`,"on-success":x,headers:{Authorization:f(g)}},{default:s(()=>[e.form.avatar?(m(),p("img",{key:0,src:e.form.avatar,class:"avatar"},null,8,N)):(m(),C(b,{key:1,class:"avatar-uploader-icon"},{default:s(()=>[o(V)]),_:1}))]),_:1},8,["action","headers"])]),o(u,{label:"Reset Account",style:{"margin-top":"20px"},"label-width":"250px;"},{default:s(()=>[o(d,{modelValue:e.form.username,"onUpdate:modelValue":l[0]||(l[0]=c=>e.form.username=c),disabled:""},null,8,["modelValue"])]),_:1}),o(u,{label:"Revise Email","label-width":"250px;"},{default:s(()=>[o(d,{modelValue:e.form.email,"onUpdate:modelValue":l[1]||(l[1]=c=>e.form.email=c)},null,8,["modelValue"])]),_:1})]),_:1}),n("div",R,[o(w,{type:"primary",onClick:y},{default:s(()=>[S("Confirm Reset")]),_:1})])])}}};export{F as default};
