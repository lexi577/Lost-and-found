import{c as D,r as S}from"./request-6080a32f.js";import{u as se}from"./index-30a7062a.js";import{bc as m}from"./index-756fa734.js";import{r as p,V as E,a7 as a,y as f,z as re,A as s,P as e,I as t,M as c,u as _,H as v,L as h,S as P}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const ie=s("span",{style:{"vertical-align":"middle"}}," Query ",-1),ce=s("span",{style:{"vertical-align":"middle"}}," Clear ",-1),de={style:{margin:"10px 0"}},ue=s("span",{style:{"vertical-align":"middle"}}," Add to ",-1),me=s("span",{style:{"vertical-align":"middle"}}," Import ",-1),pe=s("span",{style:{"vertical-align":"middle"}}," Export ",-1),_e=s("span",{style:{"vertical-align":"middle"}}," Batch Deletion ",-1),fe={style:{margin:"10px 0"}},ge={class:"page"},ye={class:"dialog-footer"},Se={__name:"Category",setup(ve){const C=p(""),V=p(1),w=p(5),z=p(0),B=se(),F=B.getBearerToken,g=B.getAuths;B.getUser;const r=E({tableData:[],form:{}}),N=p(""),k=p([]),I=o=>{k.value=o},T=()=>{if(!k.value||!k.value.length){m.warning("Please select data");return}const o=k.value.map(l=>l.id);S.post("/category/del/batch",o).then(l=>{l.code==="200"?(m.success("Operation successful"),d()):m.error(l.msg)})},d=()=>{S.get("/category/page",{params:{name:C.value,pageNum:V.value,pageSize:w.value}}).then(o=>{r.tableData=o.data.records,z.value=o.data.total})};d();const $=()=>{C.value="",d()},y=p(!1),O=E({name:[{required:!0,message:"Please enter a name",trigger:"blur"}]}),b=p(),q=()=>{y.value=!0,P(()=>{b.value.resetFields(),r.form={},N.value=""})},L=()=>{b.value.validate(o=>{o&&(r.form.content=N.value,S.request({url:"/category",method:r.form.id?"put":"post",data:r.form}).then(l=>{l.code==="200"?(m.success("save successfully"),y.value=!1,d()):m.error(l.msg)}))})},H=o=>{y.value=!0,P(()=>{b.value.resetFields(),r.form=JSON.parse(JSON.stringify(o)),N.value=o.content})},J=o=>{S.delete("/category/"+o).then(l=>{l.code==="200"?(m.success("Operation successful"),d()):m.error(l.msg)})},M=()=>{window.open(`http://${D.serverUrl}/category/export`)},Q=()=>{d(),m.success("Import Success")};return(o,l)=>{const U=a("el-input"),j=a("Search"),u=a("el-icon"),i=a("el-button"),G=a("RefreshLeft"),K=a("Plus"),W=a("Bottom"),X=a("el-upload"),Y=a("Top"),A=a("Remove"),R=a("el-popconfirm"),x=a("el-table-column"),Z=a("Edit"),ee=a("el-table"),te=a("el-pagination"),le=a("el-form-item"),ae=a("el-form"),oe=a("el-dialog");return f(),re("div",null,[s("div",null,[e(U,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=n=>C.value=n),placeholder:"Please enter a name",class:"w300"},null,8,["modelValue"]),e(i,{type:"primary",class:"ml5",onClick:d},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(j)]),_:1}),c(),ie]),_:1}),e(i,{type:"warning",class:"ml5",onClick:$},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(G)]),_:1}),c(),ce]),_:1})]),s("div",de,[_(g).includes("category.add")?(f(),v(i,{key:0,type:"success",onClick:q},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(K)]),_:1}),c(),ue]),_:1})):h("",!0),_(g).includes("category.import")?(f(),v(X,{key:1,class:"ml5","show-file-list":!1,style:{display:"inline-block",position:"relative",top:"3px"},action:`http://${_(D).serverUrl}/category/import`,"on-success":Q,headers:{Authorization:_(F)}},{default:t(()=>[e(i,{type:"primary"},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(W)]),_:1}),c(),me]),_:1})]),_:1},8,["action","headers"])):h("",!0),_(g).includes("category.export")?(f(),v(i,{key:2,type:"primary",onClick:M,class:"ml5"},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(Y)]),_:1}),c(),pe]),_:1})):h("",!0),_(g).includes("category.deleteBatch")?(f(),v(R,{key:3,title:"Are you sure you want to delete?",onConfirm:T},{reference:t(()=>[e(i,{type:"danger",style:{"margin-left":"5px"}},{default:t(()=>[e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(A)]),_:1}),c(),_e]),_:1})]),_:1})):h("",!0)]),s("div",fe,[e(ee,{data:r.tableData,stripe:"",border:"",onSelectionChange:I,"header-cell-class-name":"headerBg"},{default:t(()=>[e(x,{type:"selection",width:"55"}),e(x,{prop:"id",label:"number"}),e(x,{prop:"name",label:"Category Name"}),e(x,{label:"operate",width:"220"},{default:t(n=>[_(g).includes("category.edit")?(f(),v(i,{key:0,type:"primary",onClick:ne=>H(n.row)},{default:t(()=>[c("Revise"),e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(Z)]),_:1})]),_:2},1032,["onClick"])):h("",!0),_(g).includes("category.delete")?(f(),v(R,{key:1,title:"are you sure you want to delete?",onConfirm:ne=>J(n.row.id)},{reference:t(()=>[e(i,{type:"danger"},{default:t(()=>[c("delete"),e(u,{style:{"vertical-align":"middle"}},{default:t(()=>[e(A)]),_:1})]),_:1})]),_:2},1032,["onConfirm"])):h("",!0)]),_:1})]),_:1},8,["data"])]),s("div",ge,[e(te,{"prev-text":"previous","next-text":"next",onCurrentChange:d,onSizeChange:d,"current-page":V.value,"onUpdate:current-page":l[1]||(l[1]=n=>V.value=n),"page-size":w.value,"onUpdate:page-size":l[2]||(l[2]=n=>w.value=n),background:"","page-sizes":[4,8,12,16],layout:"prev, pager, next, total",total:z.value},null,8,["current-page","page-size","total"])]),e(oe,{modelValue:y.value,"onUpdate:modelValue":l[5]||(l[5]=n=>y.value=n),title:"Item type information",width:"40%"},{footer:t(()=>[s("span",ye,[e(i,{onClick:l[4]||(l[4]=n=>y.value=!1)},{default:t(()=>[c("Cancel")]),_:1}),e(i,{type:"primary",onClick:L},{default:t(()=>[c(" save ")]),_:1})])]),default:t(()=>[e(ae,{ref_key:"ruleFormRef",ref:b,rules:O,model:r.form,"label-width":"80px",style:{padding:"0 20px"},"status-icon":""},{default:t(()=>[e(le,{prop:"name",label:"Category Name"},{default:t(()=>[e(U,{modelValue:r.form.name,"onUpdate:modelValue":l[3]||(l[3]=n=>r.form.name=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{Se as default};
