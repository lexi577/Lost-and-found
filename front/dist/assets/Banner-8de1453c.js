import{c as N,r as C}from"./request-6080a32f.js";import{u as ce}from"./index-30a7062a.js";import{bc as p}from"./index-756fa734.js";import{r as _,V as $,a7 as a,y as f,z as ue,A as d,P as e,I as t,M as r,u as c,H as h,L as b,S as F}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const pe=d("span",{style:{"vertical-align":"middle"}}," Query ",-1),me=d("span",{style:{"vertical-align":"middle"}}," Clear ",-1),_e={style:{margin:"10px 0"}},fe=d("span",{style:{"vertical-align":"middle"}}," Add to ",-1),ge=d("span",{style:{"vertical-align":"middle"}}," Import ",-1),ve=d("span",{style:{"vertical-align":"middle"}}," Export ",-1),ye=d("span",{style:{"vertical-align":"middle"}}," Batch Deletion ",-1),he={style:{margin:"10px 0"}},be={class:"page"},xe={class:"dialog-footer"},Be={__name:"Banner",setup(ke){const x=_(""),S=_(1),V=_(5),A=_(0),U=ce(),E=U.getBearerToken,g=U.getAuths;U.getUser;const s=$({tableData:[],form:{}}),B=_(""),k=_([]),L=n=>{k.value=n},T=()=>{if(!k.value||!k.value.length){p.warning("Please select data");return}const n=k.value.map(l=>l.id);C.post("/banner/del/batch",n).then(l=>{l.code==="200"?(p.success("Operation successful"),u()):p.error(l.msg)})},u=()=>{C.get("/banner/page",{params:{name:x.value,pageNum:S.value,pageSize:V.value}}).then(n=>{s.tableData=n.data.records,A.value=n.data.total})};u();const q=()=>{x.value="",u()},v=_(!1),H=$({name:[{required:!0,message:"Please enter your name",trigger:"blur"}]}),w=_(),J=()=>{v.value=!0,F(()=>{w.value.resetFields(),s.form={},B.value=""})},M=()=>{w.value.validate(n=>{n&&(s.form.content=B.value,C.request({url:"/banner",method:s.form.id?"put":"post",data:s.form}).then(l=>{l.code==="200"?(p.success("save successfully"),v.value=!1,u()):p.error(l.msg)}))})},Y=n=>{v.value=!0,F(()=>{w.value.resetFields(),s.form=JSON.parse(JSON.stringify(n)),B.value=n.content})},Q=n=>{C.delete("/banner/"+n).then(l=>{l.code==="200"?(p.success("Operation successful"),u()):p.error(l.msg)})},j=()=>{window.open(`http://${N.serverUrl}/banner/export`)},G=()=>{u(),p.success("Import Success")},K=n=>{s.form.img=n.data,p.success("Upload Successfully")};return(n,l)=>{const R=a("el-input"),W=a("Search"),m=a("el-icon"),i=a("el-button"),X=a("RefreshLeft"),Z=a("Plus"),ee=a("Bottom"),I=a("el-upload"),te=a("Top"),D=a("Remove"),O=a("el-popconfirm"),y=a("el-table-column"),le=a("el-image"),ae=a("Edit"),oe=a("el-table"),ne=a("el-pagination"),z=a("el-form-item"),P=a("el-radio"),se=a("el-radio-group"),re=a("el-form"),ie=a("el-dialog");return f(),ue("div",null,[d("div",null,[e(R,{modelValue:x.value,"onUpdate:modelValue":l[0]||(l[0]=o=>x.value=o),placeholder:"Please enter a name",class:"w300"},null,8,["modelValue"]),e(i,{type:"primary",class:"ml5",onClick:u},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(W)]),_:1}),r(),pe]),_:1}),e(i,{type:"warning",class:"ml5",onClick:q},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(X)]),_:1}),r(),me]),_:1})]),d("div",_e,[c(g).includes("banner.add")?(f(),h(i,{key:0,type:"success",onClick:J},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(Z)]),_:1}),r(),fe]),_:1})):b("",!0),c(g).includes("banner.import")?(f(),h(I,{key:1,class:"ml5","show-file-list":!1,style:{display:"inline-block",position:"relative",top:"3px"},action:`http://${c(N).serverUrl}/banner/import`,"on-success":G,headers:{Authorization:c(E)}},{default:t(()=>[e(i,{type:"primary"},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ee)]),_:1}),r(),ge]),_:1})]),_:1},8,["action","headers"])):b("",!0),c(g).includes("banner.export")?(f(),h(i,{key:2,type:"primary",onClick:j,class:"ml5"},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(te)]),_:1}),r(),ve]),_:1})):b("",!0),c(g).includes("banner.deleteBatch")?(f(),h(O,{key:3,title:"Are you sure you want to delete?",onConfirm:T},{reference:t(()=>[e(i,{type:"danger",style:{"margin-left":"5px"}},{default:t(()=>[e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(D)]),_:1}),r(),ye]),_:1})]),_:1})):b("",!0)]),d("div",he,[e(oe,{data:s.tableData,stripe:"",border:"",onSelectionChange:L,"header-cell-class-name":"headerBg"},{default:t(()=>[e(y,{type:"selection",width:"55"}),e(y,{prop:"id",label:"Slideshow number"}),e(y,{label:"picture"},{default:t(o=>[e(le,{"preview-teleported":"",style:{width:"120px",height:"80px"},src:o.row.img,"preview-src-list":[o.row.img]},null,8,["src","preview-src-list"])]),_:1}),e(y,{prop:"url",label:"Link address"}),e(y,{prop:"index_radio",label:"Is it home page"}),e(y,{label:"operate",width:"220"},{default:t(o=>[c(g).includes("banner.edit")?(f(),h(i,{key:0,type:"primary",onClick:de=>Y(o.row)},{default:t(()=>[r("Revise"),e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ae)]),_:1})]),_:2},1032,["onClick"])):b("",!0),c(g).includes("banner.delete")?(f(),h(O,{key:1,title:"Are you sure you want to delete?",onConfirm:de=>Q(o.row.id)},{reference:t(()=>[e(i,{type:"danger"},{default:t(()=>[r("delete"),e(m,{style:{"vertical-align":"middle"}},{default:t(()=>[e(D)]),_:1})]),_:1})]),_:2},1032,["onConfirm"])):b("",!0)]),_:1})]),_:1},8,["data"])]),d("div",be,[e(ne,{"prev-text":"previous","next-text":"next",onCurrentChange:u,onSizeChange:u,"current-page":S.value,"onUpdate:current-page":l[1]||(l[1]=o=>S.value=o),"page-size":V.value,"onUpdate:page-size":l[2]||(l[2]=o=>V.value=o),background:"","page-sizes":[4,8,12,16],layout:"prev, pager, next, total",total:A.value},null,8,["current-page","page-size","total"])]),e(ie,{modelValue:v.value,"onUpdate:modelValue":l[6]||(l[6]=o=>v.value=o),title:"Slideshow information",width:"40%"},{footer:t(()=>[d("span",xe,[e(i,{onClick:l[5]||(l[5]=o=>v.value=!1)},{default:t(()=>[r("Cancel")]),_:1}),e(i,{type:"primary",onClick:M},{default:t(()=>[r(" save ")]),_:1})])]),default:t(()=>[e(re,{ref_key:"ruleFormRef",ref:w,rules:H,model:s.form,"label-width":"80px",style:{padding:"0 20px"},"status-icon":""},{default:t(()=>[e(z,{prop:"img",label:"picture"},{default:t(()=>[e(I,{"show-file-list":!1,action:`http://${c(N).serverUrl}/file/upload`,ref:"file",headers:{Authorization:c(E)},"on-success":K},{default:t(()=>[e(i,{size:"small",type:"primary"},{default:t(()=>[r("Click Upload")]),_:1})]),_:1},8,["action","headers"])]),_:1}),e(z,{prop:"url",label:"Link address"},{default:t(()=>[e(R,{modelValue:s.form.url,"onUpdate:modelValue":l[3]||(l[3]=o=>s.form.url=o),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(z,{prop:"indexRadio",label:"Is it home page"},{default:t(()=>[e(se,{modelValue:s.form.index_radio,"onUpdate:modelValue":l[4]||(l[4]=o=>s.form.index_radio=o)},{default:t(()=>[e(P,{label:"YES"},{default:t(()=>[r("YES")]),_:1}),e(P,{label:"NO"},{default:t(()=>[r("NO")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"])])}}};export{Be as default};
