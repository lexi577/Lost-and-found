import{c as N,r as C}from"./request-6080a32f.js";import{u as _e}from"./index-30a7062a.js";import"./index.esm-2d42c9cb.js";import{bc as v}from"./index-756fa734.js";import{r as c,V as T,v as fe,j as ve,a7 as n,y as m,z as A,A as i,P as e,I as t,M as r,u as g,H as w,L as y,O as I,S as M}from"./runtime-core.esm-bundler-94adbe8c.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const ge=i("span",{style:{"vertical-align":"middle"}}," Query ",-1),ye=i("span",{style:{"vertical-align":"middle"}}," Clear ",-1),he={style:{margin:"10px 0"}},be=i("span",{style:{"vertical-align":"middle"}}," Add to ",-1),Ce=i("span",{style:{"vertical-align":"middle"}}," Import ",-1),we=i("span",{style:{"vertical-align":"middle"}}," Export ",-1),ke=i("span",{style:{"vertical-align":"middle"}}," Batch Deletion ",-1),xe={style:{margin:"10px 0"}},Se={key:0},Ve={key:0},Oe={class:"page"},Ue={class:"dialog-footer"},ze=["innerHTML"],Re={class:"dialog-footer"},Fe={__name:"Orders",setup(Be){const k=c(""),U=c(1),z=c(5),P=c(0),R=_e(),$=R.getBearerToken,h=R.getAuths;R.getUser;const s=T({tableData:[],form:{}}),B=c(""),H=fe();`${N.serverUrl}`;const D=c(""),x=c(!1),q=a=>{x.value=!0,D.value=a};ve(()=>{const a=H.value;a!=null&&a.destroy()}),s.userOptions=[],C.get("/user").then(a=>s.userOptions=a.data),s.bizUserOptions=[],C.get("/bizUser").then(a=>s.bizUserOptions=a.data);const S=c([]),J=a=>{S.value=a},j=()=>{if(!S.value||!S.value.length){v.warning("Please select data");return}const a=S.value.map(l=>l.id);C.post("/orders/del/batch",a).then(l=>{l.code==="200"?(v.success("Operation successful"),p()):v.error(l.msg)})},p=()=>{C.get("/orders/page",{params:{name:k.value,pageNum:U.value,pageSize:z.value}}).then(a=>{s.tableData=a.data.records,P.value=a.data.total})};p();const Q=()=>{k.value="",p()},b=c(!1),G=T({name:[{required:!0,message:"Please enter a name",trigger:"blur"}]}),V=c(),K=()=>{b.value=!0,M(()=>{V.value.resetFields(),s.form={},B.value=""})},W=()=>{V.value.validate(a=>{a&&(s.form.content=B.value,C.request({url:"/orders",method:s.form.id?"put":"post",data:s.form}).then(l=>{l.code==="200"?(v.success("save successfully"),b.value=!1,p()):v.error(l.msg)}))})},X=a=>{b.value=!0,M(()=>{V.value.resetFields(),s.form=JSON.parse(JSON.stringify(a)),B.value=a.content})},Y=a=>{C.delete("/orders/"+a).then(l=>{l.code==="200"?(v.success("Operation successful"),p()):v.error(l.msg)})},Z=()=>{window.open(`http://${N.serverUrl}/orders/export`)},ee=()=>{p(),v.success("Import Success")};return(a,l)=>{const te=n("el-input"),le=n("Search"),_=n("el-icon"),d=n("el-button"),oe=n("RefreshLeft"),ae=n("Plus"),ne=n("Bottom"),se=n("el-upload"),re=n("Top"),E=n("Remove"),F=n("el-popconfirm"),f=n("el-table-column"),ie=n("Edit"),de=n("el-table"),ue=n("el-pagination"),O=n("el-radio"),ce=n("el-radio-group"),pe=n("el-form-item"),me=n("el-form"),L=n("el-dialog");return m(),A("div",null,[i("div",null,[e(te,{modelValue:k.value,"onUpdate:modelValue":l[0]||(l[0]=o=>k.value=o),placeholder:"Please enter a name",class:"w300"},null,8,["modelValue"]),e(d,{type:"primary",class:"ml5",onClick:p},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(le)]),_:1}),r(),ge]),_:1}),e(d,{type:"warning",class:"ml5",onClick:Q},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(oe)]),_:1}),r(),ye]),_:1})]),i("div",he,[g(h).includes("orders.add")?(m(),w(d,{key:0,type:"success",onClick:K},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ae)]),_:1}),r(),be]),_:1})):y("",!0),g(h).includes("orders.import")?(m(),w(se,{key:1,class:"ml5","show-file-list":!1,style:{display:"inline-block",position:"relative",top:"3px"},action:`http://${g(N).serverUrl}/orders/import`,"on-success":ee,headers:{Authorization:g($)}},{default:t(()=>[e(d,{type:"primary"},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ne)]),_:1}),r(),Ce]),_:1})]),_:1},8,["action","headers"])):y("",!0),g(h).includes("orders.export")?(m(),w(d,{key:2,type:"primary",onClick:Z,class:"ml5"},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(re)]),_:1}),r(),we]),_:1})):y("",!0),g(h).includes("orders.deleteBatch")?(m(),w(F,{key:3,title:"are you sure you want to delete?",onConfirm:j},{reference:t(()=>[e(d,{type:"danger",style:{"margin-left":"5px"}},{default:t(()=>[e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(E)]),_:1}),r(),ke]),_:1})]),_:1})):y("",!0)]),i("div",xe,[e(de,{data:s.tableData,stripe:"",border:"",onSelectionChange:J,"header-cell-class-name":"headerBg"},{default:t(()=>[e(f,{type:"selection",width:"55"}),e(f,{prop:"id",label:"Claim Number"}),e(f,{prop:"name",label:"Claim number"}),e(f,{label:"Claim details"},{default:t(o=>[e(d,{onClick:u=>q(o.row.content)},{default:t(()=>[r("Check")]),_:2},1032,["onClick"])]),_:1}),e(f,{prop:"state_radio",label:"Order Status"}),e(f,{label:"Claim User"},{default:t(o=>[o.row.user_id?(m(),A("span",Se,I(s.userOptions.find(u=>u.id===o.row.user_id)?s.userOptions.find(u=>u.id===o.row.user_id).name:""),1)):y("",!0)]),_:1}),e(f,{label:"Lost and found person"},{default:t(o=>[o.row.biz_user_id?(m(),A("span",Ve,I(s.userOptions.find(u=>u.id===o.row.biz_user_id)?s.userOptions.find(u=>u.id===o.row.biz_user_id).name:""),1)):y("",!0)]),_:1}),e(f,{label:"operate",width:"220"},{default:t(o=>[g(h).includes("orders.edit")?(m(),w(d,{key:0,type:"primary",onClick:u=>X(o.row)},{default:t(()=>[r("Revise"),e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(ie)]),_:1})]),_:2},1032,["onClick"])):y("",!0),g(h).includes("orders.delete")?(m(),w(F,{key:1,title:"are you sure you want to delete?",onConfirm:u=>Y(o.row.id)},{reference:t(()=>[e(d,{type:"danger"},{default:t(()=>[r("delete"),e(_,{style:{"vertical-align":"middle"}},{default:t(()=>[e(E)]),_:1})]),_:1})]),_:2},1032,["onConfirm"])):y("",!0)]),_:1})]),_:1},8,["data"])]),i("div",Oe,[e(ue,{"prev-text":"previous","next-text":"next",onCurrentChange:p,onSizeChange:p,"current-page":U.value,"onUpdate:current-page":l[1]||(l[1]=o=>U.value=o),"page-size":z.value,"onUpdate:page-size":l[2]||(l[2]=o=>z.value=o),background:"","page-sizes":[4,8,12,16],layout:"prev, pager, next, total",total:P.value},null,8,["current-page","page-size","total"])]),e(L,{modelValue:b.value,"onUpdate:modelValue":l[5]||(l[5]=o=>b.value=o),title:"Lost and Found Recordsinformation",width:"40%"},{footer:t(()=>[i("span",Ue,[e(d,{onClick:l[4]||(l[4]=o=>b.value=!1)},{default:t(()=>[r("Cancel")]),_:1}),e(d,{type:"primary",onClick:W},{default:t(()=>[r(" save ")]),_:1})])]),default:t(()=>[e(me,{ref_key:"ruleFormRef",ref:V,rules:G,model:s.form,"label-width":"100px",style:{padding:"0 20px"},"status-icon":""},{default:t(()=>[e(pe,{prop:"stateRadio",label:"Claim status"},{default:t(()=>[e(ce,{modelValue:s.form.state_radio,"onUpdate:modelValue":l[3]||(l[3]=o=>s.form.state_radio=o)},{default:t(()=>[e(O,{label:"Applying"},{default:t(()=>[r("Applying")]),_:1}),e(O,{label:"Confirmed as the owner"},{default:t(()=>[r("Confirmed as the owner")]),_:1}),e(O,{label:"Returned"},{default:t(()=>[r("Returned")]),_:1}),e(O,{label:"Cancelled"},{default:t(()=>[r("Cancelled")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["modelValue"]),e(L,{modelValue:x.value,"onUpdate:modelValue":l[7]||(l[7]=o=>x.value=o),title:"Preview",width:"40%"},{footer:t(()=>[i("span",Re,[e(d,{onClick:l[6]||(l[6]=o=>x.value=!1)},{default:t(()=>[r("closure")]),_:1})])]),default:t(()=>[i("div",{id:"editor-content-view",class:"editor-content-view",innerHTML:D.value,style:{padding:"0 20px"}},null,8,ze)]),_:1},8,["modelValue"])])}}};export{Fe as default};
