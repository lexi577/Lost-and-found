import{c as P,r as H}from"./request-6080a32f.js";import{r as b,u as W}from"./index-30a7062a.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{w as E,o as z,y as C,z as w,A as u,r as v,V,a7 as g,O as L,u as M,P as d,I as m,L as T,M as k}from"./runtime-core.esm-bundler-94adbe8c.js";import{bc as x}from"./index-756fa734.js";import"./runtime-dom.esm-bundler-ffed9dc3.js";const R={class:"s-canvas"},U=["width","height"],D={__name:"Sidentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:35},fontSizeMax:{type:Number,default:35},backgroundColorMin:{type:Number,default:180},backgroundColorMax:{type:Number,default:240},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:100},lineColorMax:{type:Number,default:200},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:120},contentHeight:{type:Number,default:40}},setup(N){const t=N,r=(e,o)=>Math.floor(Math.random()*(o-e)+e),f=(e,o)=>{let i=r(e,o),l=r(e,o),n=r(e,o);return"rgb("+i+","+l+","+n+")"},_=e=>{for(let o=0;o<3;o++)e.strokeStyle=f(t.lineColorMin,t.lineColorMax),e.beginPath(),e.moveTo(r(0,t.contentWidth),r(0,t.contentHeight)),e.lineTo(r(0,t.contentWidth),r(0,t.contentHeight)),e.stroke()},p=(e,o,i)=>{e.fillStyle=f(t.colorMin,t.colorMax),e.font=r(t.fontSizeMin,t.fontSizeMax)+"px SimHei";let l=(i+1)*(t.contentWidth/(t.identifyCode.length+1)),n=r(t.fontSizeMax,t.contentHeight-5);var s=r(-10,10);e.translate(l,n),e.rotate(s*Math.PI/100),e.fillText(o,0,0),e.rotate(-s*Math.PI/100),e.translate(-l,-n)},y=e=>{for(let o=0;o<30;o++)e.fillStyle=f(0,255),e.beginPath(),e.arc(r(0,t.contentWidth),r(0,t.contentHeight),1,0,2*Math.PI),e.fill()},a=()=>{let o=document.getElementById("s-canvas").getContext("2d");o.textBaseline="bottom",o.fillStyle=f(t.backgroundColorMin,t.backgroundColorMax),o.fillRect(0,0,t.contentWidth,t.contentHeight);for(let i=0;i<t.identifyCode.length;i++)p(o,t.identifyCode[i],i);_(o),y(o)};return E(()=>t.identifyCode,(e,o)=>{a()}),z(()=>{a()}),(e,o)=>(C(),w("div",R,[u("canvas",{id:"s-canvas",width:t.contentWidth,height:t.contentHeight},null,8,U)]))}},F=B(D,[["__scopeId","data-v-cb56833f"]]);const $={class:"wrapper"},q={style:{margin:"150px auto","background-color":"#FF9900",width:"400px",height:"330px",padding:"20px","border-radius":"10px"}},A={style:{margin:"20px 0","text-align":"center","font-size":"24px",color:"#ffffff"}},j={key:0,style:{display:"flex",margin:"15px 0"}},O={style:{flex:"1"}},G=u("div",{style:{"text-align":"center"}},[u("a",{style:{"text-decoration":"none",color:"#ffffff","margin-left":"20px"},href:"/front/home"},"Enter front desk")],-1),ee={__name:"Login",setup(N){let t="1234567890",r=v("");const f=v(0),_=(l,n)=>Math.floor(Math.random()*(n-l)+l),p=(l,n)=>{for(let s=0;s<n;s++)r.value+=l[_(0,l.length)]},y=()=>{r.value="",p(t,4)};z(()=>{r.value="",p(t,4)});const a=V({}),e=V({username:[{required:!0,message:"Please enter your account number",trigger:"blur"}],password:[{required:!0,message:"Please enter your password",trigger:"blur"},{min:3,max:20,message:"The password length is between 3 and 20 characters.",trigger:"blur"}]}),o=v(),i=()=>{o.value.validate(l=>{if(l){if(f.value>=3&&a.code!==r.value){x.warning("Verification code error");return}H.post("/login",a).then(n=>{n.code==="200"?(n.data.user.role==="ADMIN"?b.push("/"):n.data.user.role==="MEMBER"&&b.push("/front"),x.success("Login successful"),W().setManagerInfo(n.data)):(x.error(n.msg),f.value++)})}})};return(l,n)=>{const s=g("el-input"),h=g("el-form-item"),S=g("el-button"),I=g("el-form");return C(),w("div",$,[u("div",q,[u("div",A,[u("b",null,L(M(P).projectName),1)]),d(I,{ref_key:"ruleFormRef",ref:o,model:a,rules:e,size:"large","status-icon":""},{default:m(()=>[d(h,{prop:"username"},{default:m(()=>[d(s,{size:"medium",style:{margin:"10px 0"},"prefix-icon":"el-icon-user",modelValue:a.username,"onUpdate:modelValue":n[0]||(n[0]=c=>a.username=c)},null,8,["modelValue"])]),_:1}),d(h,{prop:"password"},{default:m(()=>[d(s,{size:"medium",style:{margin:"10px 0"},"prefix-icon":"el-icon-lock","show-password":"",modelValue:a.password,"onUpdate:modelValue":n[1]||(n[1]=c=>a.password=c)},null,8,["modelValue"])]),_:1}),f.value>=3?(C(),w("div",j,[u("div",O,[d(s,{modelValue:a.code,"onUpdate:modelValue":n[2]||(n[2]=c=>a.code=c),placeholder:"Verification Code"},null,8,["modelValue"])]),u("div",null,[u("div",{onClick:y,style:{"margin-left":"5px"}},[d(F,{identifyCode:M(r)},null,8,["identifyCode"])])])])):T("",!0),d(h,{style:{margin:"10px 0","text-align":"right"}},{default:m(()=>[d(S,{type:"primary",autocomplete:"off",onClick:i},{default:m(()=>[k("Log in")]),_:1}),d(S,{type:"info",autocomplete:"off",onClick:n[3]||(n[3]=c=>M(b).push("/register-member"))},{default:m(()=>[k("User Registration")]),_:1})]),_:1})]),_:1},8,["model","rules"]),G])])}}};export{ee as default};
